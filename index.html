<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0A0E1A" />
  <title>Commencer √† payer ‚Äî DIGIY (Wave)</title>
  <meta name="description" content="Paiement DIGIY par Wave. Message de paiement g√©n√©r√© automatiquement pour activer ton abonnement." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@500;700;800;900&family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#020617;
      --card:rgba(15,23,42,0.96);
      --border:rgba(148,163,184,0.35);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --gold:#facc15;
      --orange:#f97316;
      --orange2:#ea580c;
      --ok:#22c55e;
      --danger:#ef4444;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Manrope,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(circle at 10% 10%, rgba(249,115,22,0.18), transparent 55%),
        radial-gradient(circle at 90% 90%, rgba(250,204,21,0.12), transparent 55%),
        var(--bg);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:22px 14px 40px;
    }
    .wrap{width:100%;max-width:980px}
    .top{
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
      padding:16px 16px;
      border:1px solid var(--border);
      border-radius:18px;
      background:rgba(2,6,23,0.7);
      backdrop-filter:blur(18px);
    }
    .brand{display:flex;align-items:center;gap:12px;text-decoration:none;color:inherit}
    .logo{
      width:48px;height:48px;border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      background:radial-gradient(circle at 30% 20%, #fef3c7, var(--orange));
      color:#0b1220;font-weight:900;font-size:22px;
      box-shadow:0 12px 32px rgba(249,115,22,0.35);
      font-family:Outfit,system-ui;
    }
    .brand h1{
      font-family:Outfit,system-ui;
      font-size:16px;
      letter-spacing:.12em;
      text-transform:uppercase;
      margin:0;
      line-height:1.1;
    }
    .brand p{margin:2px 0 0;color:var(--muted);font-size:12px;font-weight:700;letter-spacing:.08em;text-transform:uppercase}
    .btnBack{
      border:1px solid var(--border);
      background:rgba(15,23,42,0.65);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-family:Outfit,system-ui;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:12px;
      white-space:nowrap;
    }
    .btnBack:hover{border-color:rgba(249,115,22,0.8)}
    .hero{
      margin-top:16px;
      border:1px solid var(--border);
      border-radius:22px;
      background:linear-gradient(135deg, rgba(15,23,42,0.96), rgba(2,6,23,0.86));
      padding:18px 16px;
      overflow:hidden;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute;inset:-30%;
      background:
        radial-gradient(circle at 0 0, rgba(250,204,21,0.12), transparent 60%),
        radial-gradient(circle at 100% 0, rgba(249,115,22,0.18), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .heroInner{position:relative}
    .hello{
      font-family:Outfit,system-ui;
      font-size:20px;
      font-weight:900;
      margin-bottom:8px;
      line-height:1.25;
    }
    .hello span{
      background:linear-gradient(135deg,var(--orange),var(--gold));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }
    .sub{
      color:var(--muted);
      font-size:14px;
      line-height:1.6;
      font-weight:700;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      margin-top:14px;
    }
    @media(max-width:900px){.grid{grid-template-columns:1fr}}

    .card{
      border:1px solid var(--border);
      border-radius:22px;
      background:var(--card);
      padding:16px;
    }
    .card h2{
      font-family:Outfit,system-ui;
      font-size:14px;
      text-transform:uppercase;
      letter-spacing:.14em;
      margin-bottom:10px;
      color:#cbd5e1;
    }

    .steps{
      display:grid;
      gap:10px;
    }
    .step{
      border:1px solid rgba(148,163,184,0.25);
      background:rgba(2,6,23,0.55);
      border-radius:16px;
      padding:12px;
    }
    .stepTop{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      font-family:Outfit,system-ui;
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      background:linear-gradient(135deg,var(--orange),var(--orange2));
      color:#0b1220;
      border:1px solid rgba(249,115,22,0.65);
      white-space:nowrap;
    }
    .mini{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
      line-height:1.55;
      margin-top:8px;
    }

    label{
      display:block;
      font-size:12px;
      color:#a7b0c0;
      font-weight:800;
      margin:12px 0 6px 2px;
    }
    input, textarea{
      width:100%;
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.28);
      background:rgba(2,6,23,0.55);
      color:var(--text);
      padding:12px 12px;
      font-weight:700;
      outline:none;
    }
    textarea{min-height:92px;resize:vertical}
    input:focus, textarea:focus{border-color:rgba(250,204,21,0.75)}

    .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:520px){.row2{grid-template-columns:1fr}}

    .ctaRow{
      display:flex;flex-wrap:wrap;gap:10px;align-items:center;
      margin-top:12px;
    }
    .btn{
      border:none;
      cursor:pointer;
      border-radius:999px;
      padding:12px 14px;
      font-family:Outfit,system-ui;
      font-weight:950;
      text-transform:uppercase;
      letter-spacing:.12em;
      font-size:12px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      white-space:nowrap;
    }
    .btnPrimary{
      background:linear-gradient(135deg,var(--gold),#f59e0b);
      color:#052e16;
      box-shadow:0 14px 36px rgba(250,204,21,0.18);
    }
    .btnGhost{
      background:rgba(15,23,42,0.65);
      border:1px solid rgba(148,163,184,0.35);
      color:var(--text);
    }
    .btnGhost:hover{border-color:rgba(249,115,22,0.75)}
    .hint{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
      line-height:1.55;
      font-weight:700;
    }

    .payBox{
      display:grid;
      gap:10px;
    }
    .payLine{
      border:1px solid rgba(148,163,184,0.25);
      background:rgba(2,6,23,0.55);
      border-radius:16px;
      padding:12px;
    }
    .payLine strong{color:#fff}
    .bigPhone{
      font-family:Outfit,system-ui;
      font-weight:950;
      font-size:18px;
      letter-spacing:.06em;
      margin-top:6px;
    }
    .ok{
      display:flex;align-items:center;gap:8px;
      font-weight:900;
      color:#dcfce7;
      background:rgba(34,197,94,0.12);
      border:1px solid rgba(34,197,94,0.35);
      padding:10px 12px;border-radius:16px;
      font-size:12px;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-family:Outfit,system-ui;
    }

    footer{
      margin-top:14px;
      text-align:center;
      color:rgba(148,163,184,0.85);
      font-size:12px;
      font-weight:700;
    }
    .tiny{opacity:.85;font-size:11px;margin-top:6px}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <a class="brand" href="#" aria-label="DIGIY Paiement">
        <div class="logo">‚àû</div>
        <div>
          <h1>DIGIY ‚Äî Paiement</h1>
          <p>Wave ‚Ä¢ Message automatique ‚Ä¢ Activation rapide</p>
        </div>
      </a>

      <!-- üîÅ Mets ici ton HUB GitHub si tu veux -->
      <a class="btnBack" href="https://beauville.github.io/digiy-hub/" rel="noopener">
        ‚Üê Retour au HUB
      </a>
    </div>

    <div class="hero">
      <div class="heroInner">
        <div class="hello">Bienvenue chez <span>DIGIY</span> fr√©rot ü¶Ö</div>
        <div class="sub">
          Ici tu payes **en direct**, sans interm√©diaire, pour activer ton module / ton pack.
          On te g√©n√®re le <strong>message Wave exact</strong> pour que l‚Äôactivation soit carr√©e.
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: FORM + STEPS -->
      <div class="card">
        <h2>√âtape 1 ‚Äî Remplis tes infos</h2>

        <label>Nom / Pr√©nom</label>
        <input id="pgName" placeholder="Ex: Awa Diop" autocomplete="name" />

        <div class="row2">
          <div>
            <label>T√©l√©phone</label>
            <input id="pgPhone" placeholder="+221 77..." autocomplete="tel" />
          </div>
          <div>
            <label>Ville / Zone</label>
            <input id="pgZone" placeholder="Ex: Saly Centre" />
          </div>
        </div>

        <div class="row2">
          <div>
            <label>Module</label>
            <input id="pgModule" placeholder="Ex: DRIVER" />
          </div>
          <div>
            <label>Offre</label>
            <input id="pgOffre" placeholder="Ex: STARTER_19900" />
          </div>
        </div>

        <label>Nom de l‚Äôabonnement</label>
        <input id="pgAbo" placeholder="Ex: DIGIY_DRIVER_9900" />

        <label>Message Wave (copier-coller)</label>
        <textarea id="pgMessage" readonly></textarea>

        <div class="ctaRow">
          <button class="btn btnPrimary" id="btnCopy">
            üìã Copier le message
          </button>

          <a class="btn btnGhost" id="btnWhatsapp" href="#" target="_blank" rel="noopener">
            üí¨ Envoyer le message sur WhatsApp
          </a>

          <button class="btn btnGhost" id="btnSave">
            ‚úÖ Sauver mes infos
          </button>
        </div>

        <div class="hint">
          ‚úÖ Astuce : si tu viens depuis la page Tarifs, le module et l‚Äôoffre peuvent arriver automatiquement (via l‚ÄôURL).
          <br>
          üîê Les infos sont sauvegard√©es en local sur l‚Äôappareil (pour l‚Äôinstant).
        </div>
      </div>

      <!-- RIGHT: PAYMENT INFO -->
      <div class="card">
        <h2>√âtape 2 ‚Äî Paiement Wave</h2>

        <div class="payBox">
          <div class="payLine">
            <div class="ok">‚úÖ Paiement direct ‚Äî 0% commission</div>
          </div>

          <div class="payLine">
            <div><strong>Envoyer le montant exact √† :</strong></div>
            <div class="bigPhone" id="waveNumber">+221 77 134 28 89</div>
            <div class="tiny">Compte Wave : <strong>JB BEAUVILLE</strong></div>
          </div>

          <div class="payLine">
            <div><strong>Message obligatoire √† coller dans Wave :</strong></div>
            <div class="tiny">Tu copies le message g√©n√©r√© √† gauche, tu le colles dans Wave, et c‚Äôest carr√©.</div>
          </div>

          <div class="payLine">
            <div><strong>Apr√®s paiement :</strong></div>
            <div class="mini">
              On v√©rifie, puis on active ton abonnement DIGIY.
              <br><br>
              Besoin d‚Äôaide ? WhatsApp direct.
            </div>
          </div>

          <a class="btn btnPrimary" href="https://wa.me/221771342889" target="_blank" rel="noopener" style="justify-content:center;">
            üí¨ Contacter DIGIY (WhatsApp)
          </a>
        </div>
      </div>
    </div>

    <footer>
      ¬© DIGIYLYFE ‚Äî Made in S√©n√©gal ‚Ä¢ 0% commission ‚Ä¢ Paiement direct au pro
      <div class="tiny">Page: /commencer-a-payer/ ‚Ä¢ Compatible mobile & PWA</div>
    </footer>
  </div>

  <script>
    // ‚úÖ CONFIG
    const WAVE_NAME = "JB BEAUVILLE";
    const WAVE_PHONE_E164 = "+221771342889"; // format pratique (wa.me etc.)
    const WAVE_DISPLAY = "+221 77 134 28 89";

    // UI
    document.getElementById("waveNumber").textContent = WAVE_DISPLAY;

    const $name   = document.getElementById("pgName");
    const $phone  = document.getElementById("pgPhone");
    const $zone   = document.getElementById("pgZone");
    const $module = document.getElementById("pgModule");
    const $offre  = document.getElementById("pgOffre");
    const $abo    = document.getElementById("pgAbo");
    const $msg    = document.getElementById("pgMessage");

    // ‚úÖ 1) Pr√©-remplissage via URL
    (function hydrateFromUrl(){
      const params = new URLSearchParams(window.location.search);
      const m = params.get("module");
      const o = params.get("offre");
      const a = params.get("abo");
      if(m) $module.value = m;
      if(o) $offre.value  = o;
      if(a) $abo.value    = a;
    })();

    // ‚úÖ 2) Restore local
    (function restore(){
      try{
        const raw = localStorage.getItem("digiy_payment_profile");
        if(!raw) return;
        const p = JSON.parse(raw);
        if(p.name)  $name.value  = p.name;
        if(p.phone) $phone.value = p.phone;
        if(p.zone)  $zone.value  = p.zone;
      }catch(e){}
    })();

    // ‚úÖ 3) G√©n√©rateur message Wave
    function buildMessage(){
      const name = ($name.value || "").trim();
      const phone = ($phone.value || "").trim();
      const zone = ($zone.value || "").trim();

      const module = ($module.value || "HUB").trim().toUpperCase();
      const offre  = ($offre.value  || "STANDARD").trim().toUpperCase();
      const abo    = ($abo.value    || "DIGIY").trim();

      // Format message: court, norm√©, lisible
      const parts = [
        "DIGIY",
        `CLIENT:${name || "N/A"}`,
        `TEL:${phone || "N/A"}`,
        `ZONE:${zone || "N/A"}`,
        `MODULE:${module}`,
        `OFFRE:${offre}`,
        `ABO:${abo}`,
        `PAYER:${WAVE_NAME}`
      ];
      return parts.join(" | ");
    }

    function refresh(){
      $msg.value = buildMessage();
      const msg = encodeURIComponent($msg.value);
      document.getElementById("btnWhatsapp").href =
        `https://wa.me/${WAVE_PHONE_E164.replace("+","")}?text=${msg}`;
    }

    ["input","change"].forEach(evt=>{
      [$name,$phone,$zone,$module,$offre,$abo].forEach(el=>el.addEventListener(evt, refresh));
    });

    refresh();

    // ‚úÖ Copier
    document.getElementById("btnCopy").addEventListener("click", async ()=>{
      try{
        await navigator.clipboard.writeText($msg.value);
        alert("‚úÖ Message copi√©. Colle-le dans Wave.");
      }catch(e){
        // fallback
        $msg.focus();
        $msg.select();
        document.execCommand("copy");
        alert("‚úÖ Message copi√© (mode compat).");
      }
    });

    // ‚úÖ Save local
    document.getElementById("btnSave").addEventListener("click", ()=>{
      const payload = {
        name: ($name.value||"").trim(),
        phone: ($phone.value||"").trim(),
        zone: ($zone.value||"").trim(),
      };
      localStorage.setItem("digiy_payment_profile", JSON.stringify(payload));
      alert("‚úÖ Infos sauvegard√©es sur cet appareil.");
    });
  </script>
</body>
</html>
